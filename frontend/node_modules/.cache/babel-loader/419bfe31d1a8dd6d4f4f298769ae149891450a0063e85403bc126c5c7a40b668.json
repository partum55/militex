{"ast":null,"code":"import React,{useState,useCallback,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useTranslation}from'react-i18next';import{useDropzone}from'react-dropzone';import CarService from'../../services/car.service';import{createFilePreview,revokeFilePreview}from'../../utils/helpers';// Step components\nimport VehicleDetailsStep from'./sell-steps/VehicleDetailsStep';import LocationPriceStep from'./sell-steps/LocationPriceStep';import ConfirmationStep from'./sell-steps/ConfirmationStep';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SellCarForm=_ref=>{let{initialData,isEditing=false,carId,onSuccess}=_ref;const{t}=useTranslation();const navigate=useNavigate();// Form data state with default values or initial data if editing\nconst[formData,setFormData]=useState({make:(initialData===null||initialData===void 0?void 0:initialData.make)||'',model:(initialData===null||initialData===void 0?void 0:initialData.model)||'',year:(initialData===null||initialData===void 0?void 0:initialData.year)||'',mileage:(initialData===null||initialData===void 0?void 0:initialData.mileage)||'',vehicle_type:(initialData===null||initialData===void 0?void 0:initialData.vehicle_type)||'',condition:(initialData===null||initialData===void 0?void 0:initialData.condition)||'',fuel_type:(initialData===null||initialData===void 0?void 0:initialData.fuel_type)||'',transmission:(initialData===null||initialData===void 0?void 0:initialData.transmission)||'',body_type:(initialData===null||initialData===void 0?void 0:initialData.body_type)||'',country:(initialData===null||initialData===void 0?void 0:initialData.country)||'',city:(initialData===null||initialData===void 0?void 0:initialData.city)||'',price:(initialData===null||initialData===void 0?void 0:initialData.price)||'',negotiable:(initialData===null||initialData===void 0?void 0:initialData.negotiable)||false,engine_size:(initialData===null||initialData===void 0?void 0:initialData.engine_size)||'',engine_power:(initialData===null||initialData===void 0?void 0:initialData.engine_power)||'',description:(initialData===null||initialData===void 0?void 0:initialData.description)||'',uploaded_images:[],existing_images:(initialData===null||initialData===void 0?void 0:initialData.images)||[],images_to_delete:[]// Track IDs of images to delete during update\n});// UI state\nconst[currentStep,setCurrentStep]=useState(1);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState(false);// File upload handling\nconst onDrop=useCallback(acceptedFiles=>{setFormData(prevData=>({...prevData,uploaded_images:[...prevData.uploaded_images,...acceptedFiles.map(file=>Object.assign(file,{preview:createFilePreview(file)}))]}));},[]);const{getRootProps,getInputProps,isDragActive}=useDropzone({onDrop,accept:{'image/*':['.jpeg','.jpg','.png']},maxSize:5242880// 5MB\n});// Clean up previews on unmount\nuseEffect(()=>{return()=>{formData.uploaded_images.forEach(file=>{if(file.preview){revokeFilePreview(file.preview);}});};},[formData.uploaded_images]);const removeImage=index=>{setFormData(prevData=>{const newImages=[...prevData.uploaded_images];const removed=newImages.splice(index,1)[0];// Revoke the object URL to avoid memory leaks\nif(removed.preview){revokeFilePreview(removed.preview);}return{...prevData,uploaded_images:newImages};});};const removeExistingImage=index=>{setFormData(prevData=>{const newImages=[...prevData.existing_images];const removedImage=newImages.splice(index,1)[0];// If the image has an ID, add it to the list of images to delete\nconst imagesToDelete=[...prevData.images_to_delete];if(removedImage&&removedImage.id){imagesToDelete.push(removedImage.id);}return{...prevData,existing_images:newImages,images_to_delete:imagesToDelete};});};// Form handling\nconst handleInputChange=e=>{const{name,value,type,checked}=e.target;setFormData(prevData=>({...prevData,[name]:type==='checkbox'?checked:value}));};const nextStep=()=>{window.scrollTo(0,0);setCurrentStep(prevStep=>prevStep+1);};const prevStep=()=>{window.scrollTo(0,0);setCurrentStep(prevStep=>prevStep-1);};const validateForm=()=>{// Base required fields\nconst requiredFields=['make','model','year','mileage','vehicle_type','condition','fuel_type','transmission','country','city','price'];const missingFields=requiredFields.filter(field=>!formData[field]);if(missingFields.length>0){setError(`Please fill in all required fields: ${missingFields.join(', ')}`);return false;}// Validate numeric fields\nif(isNaN(parseFloat(formData.price))||parseFloat(formData.price)<=0){setError('Please enter a valid price');return false;}if(isNaN(parseInt(formData.year))||parseInt(formData.year)<1900||parseInt(formData.year)>new Date().getFullYear()){setError('Please enter a valid year');return false;}if(isNaN(parseInt(formData.mileage))||parseInt(formData.mileage)<0){setError('Please enter a valid mileage');return false;}// Validate that there's at least one image when creating a new car\nif(!isEditing&&formData.uploaded_images.length===0){setError('Please upload at least one image of your vehicle');return false;}// When editing, ensure there's at least one image remaining\nif(isEditing&&formData.existing_images.length===0&&formData.uploaded_images.length===0){setError('Please keep at least one image or upload a new one');return false;}return true;};const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){window.scrollTo(0,0);return;}setLoading(true);setError('');try{// Prepare data for submission\nconst formDataToSubmit=new FormData();// Add simple fields\nObject.entries(formData).forEach(_ref2=>{let[key,value]=_ref2;// Skip special fields that need special handling\nif(key!=='uploaded_images'&&key!=='existing_images'&&key!=='images_to_delete'&&value!==''){formDataToSubmit.append(key,value);}});// Add uploaded images\nformData.uploaded_images.forEach(image=>{formDataToSubmit.append('uploaded_images',image);});// Add image IDs to delete when editing\nif(isEditing&&formData.images_to_delete.length>0){formDataToSubmit.append('images_to_delete',JSON.stringify(formData.images_to_delete));}if(isEditing&&carId){// For editing, we'll need to handle existing images differently\nawait CarService.updateCar(carId,formDataToSubmit);}else{// For creating new\nawait CarService.createCar(formDataToSubmit);}setSuccess(true);// Clean up previews\nformData.uploaded_images.forEach(file=>{if(file.preview){revokeFilePreview(file.preview);}});if(onSuccess){onSuccess();}else{// Redirect after a delay\nsetTimeout(()=>{navigate('/profile');},2000);}}catch(error){var _error$response,_error$response$data;console.error('Submission error:',error);setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||'Failed to submit. Please check your information and try again.');window.scrollTo(0,0);}finally{setLoading(false);}};// Render appropriate step\nconst renderStep=()=>{switch(currentStep){case 1:return/*#__PURE__*/_jsx(VehicleDetailsStep,{formData:formData,handleInputChange:handleInputChange,nextStep:nextStep,isEditing:isEditing});case 2:return/*#__PURE__*/_jsx(LocationPriceStep,{formData:formData,handleInputChange:handleInputChange,getRootProps:getRootProps,getInputProps:getInputProps,isDragActive:isDragActive,uploadedImages:formData.uploaded_images,existingImages:formData.existing_images,removeImage:removeImage,removeExistingImage:removeExistingImage,nextStep:nextStep,prevStep:prevStep,isEditing:isEditing});case 3:return/*#__PURE__*/_jsx(ConfirmationStep,{formData:formData,handleSubmit:handleSubmit,prevStep:prevStep,loading:loading,isEditing:isEditing});default:return/*#__PURE__*/_jsx(\"div\",{children:\"Invalid step\"});}};if(success){return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-bold\",children:\"Success!\"}),/*#__PURE__*/_jsx(\"p\",{children:isEditing?t('cars.carUpdatedSuccess'):t('cars.carCreatedSuccess')})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-3xl mx-auto bg-white rounded-lg shadow-md p-6\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:`w-8 h-8 rounded-full flex items-center justify-center ${currentStep>=1?'bg-indigo-900 text-white':'bg-gray-300 text-gray-600'}`,children:\"1\"}),/*#__PURE__*/_jsx(\"div\",{className:`h-1 flex-1 ${currentStep>=2?'bg-indigo-900':'bg-gray-300'}`}),/*#__PURE__*/_jsx(\"div\",{className:`w-8 h-8 rounded-full flex items-center justify-center ${currentStep>=2?'bg-indigo-900 text-white':'bg-gray-300 text-gray-600'}`,children:\"2\"}),/*#__PURE__*/_jsx(\"div\",{className:`h-1 flex-1 ${currentStep>=3?'bg-indigo-900':'bg-gray-300'}`}),/*#__PURE__*/_jsx(\"div\",{className:`w-8 h-8 rounded-full flex items-center justify-center ${currentStep>=3?'bg-indigo-900 text-white':'bg-gray-300 text-gray-600'}`,children:\"3\"})]})}),renderStep()]});};export default SellCarForm;","map":{"version":3,"names":["React","useState","useCallback","useEffect","useNavigate","useTranslation","useDropzone","CarService","createFilePreview","revokeFilePreview","VehicleDetailsStep","LocationPriceStep","ConfirmationStep","jsx","_jsx","jsxs","_jsxs","SellCarForm","_ref","initialData","isEditing","carId","onSuccess","t","navigate","formData","setFormData","make","model","year","mileage","vehicle_type","condition","fuel_type","transmission","body_type","country","city","price","negotiable","engine_size","engine_power","description","uploaded_images","existing_images","images","images_to_delete","currentStep","setCurrentStep","loading","setLoading","error","setError","success","setSuccess","onDrop","acceptedFiles","prevData","map","file","Object","assign","preview","getRootProps","getInputProps","isDragActive","accept","maxSize","forEach","removeImage","index","newImages","removed","splice","removeExistingImage","removedImage","imagesToDelete","id","push","handleInputChange","e","name","value","type","checked","target","nextStep","window","scrollTo","prevStep","validateForm","requiredFields","missingFields","filter","field","length","join","isNaN","parseFloat","parseInt","Date","getFullYear","handleSubmit","preventDefault","formDataToSubmit","FormData","entries","_ref2","key","append","image","JSON","stringify","updateCar","createCar","setTimeout","_error$response","_error$response$data","console","response","data","detail","renderStep","uploadedImages","existingImages","children","className"],"sources":["C:/Users/bogda/Pyton programs/Web application OP/MILITEX/militex/frontend/src/components/cars/SellCarForm.js"],"sourcesContent":["import React, { useState, useCallback, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport CarService from '../../services/car.service';\r\nimport { createFilePreview, revokeFilePreview } from '../../utils/helpers';\r\n\r\n// Step components\r\nimport VehicleDetailsStep from './sell-steps/VehicleDetailsStep';\r\nimport LocationPriceStep from './sell-steps/LocationPriceStep';\r\nimport ConfirmationStep from './sell-steps/ConfirmationStep';\r\n\r\nconst SellCarForm = ({ initialData, isEditing = false, carId, onSuccess }) => {\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n\r\n  // Form data state with default values or initial data if editing\r\n  const [formData, setFormData] = useState({\r\n    make: initialData?.make || '',\r\n    model: initialData?.model || '',\r\n    year: initialData?.year || '',\r\n    mileage: initialData?.mileage || '',\r\n    vehicle_type: initialData?.vehicle_type || '',\r\n    condition: initialData?.condition || '',\r\n    fuel_type: initialData?.fuel_type || '',\r\n    transmission: initialData?.transmission || '',\r\n    body_type: initialData?.body_type || '',\r\n    country: initialData?.country || '',\r\n    city: initialData?.city || '',\r\n    price: initialData?.price || '',\r\n    negotiable: initialData?.negotiable || false,\r\n    engine_size: initialData?.engine_size || '',\r\n    engine_power: initialData?.engine_power || '',\r\n    description: initialData?.description || '',\r\n    uploaded_images: [],\r\n    existing_images: initialData?.images || [],\r\n    images_to_delete: [] // Track IDs of images to delete during update\r\n  });\r\n\r\n  // UI state\r\n  const [currentStep, setCurrentStep] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  // File upload handling\r\n  const onDrop = useCallback((acceptedFiles) => {\r\n    setFormData(prevData => ({\r\n      ...prevData,\r\n      uploaded_images: [\r\n        ...prevData.uploaded_images,\r\n        ...acceptedFiles.map(file => Object.assign(file, {\r\n          preview: createFilePreview(file)\r\n        }))\r\n      ]\r\n    }));\r\n  }, []);\r\n\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\r\n    onDrop,\r\n    accept: {\r\n      'image/*': ['.jpeg', '.jpg', '.png']\r\n    },\r\n    maxSize: 5242880, // 5MB\r\n  });\r\n\r\n  // Clean up previews on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      formData.uploaded_images.forEach(file => {\r\n        if (file.preview) {\r\n          revokeFilePreview(file.preview);\r\n        }\r\n      });\r\n    };\r\n  }, [formData.uploaded_images]);\r\n\r\n  const removeImage = (index) => {\r\n    setFormData(prevData => {\r\n      const newImages = [...prevData.uploaded_images];\r\n      const removed = newImages.splice(index, 1)[0];\r\n\r\n      // Revoke the object URL to avoid memory leaks\r\n      if (removed.preview) {\r\n        revokeFilePreview(removed.preview);\r\n      }\r\n\r\n      return {\r\n        ...prevData,\r\n        uploaded_images: newImages\r\n      };\r\n    });\r\n  };\r\n\r\n  const removeExistingImage = (index) => {\r\n    setFormData(prevData => {\r\n      const newImages = [...prevData.existing_images];\r\n      const removedImage = newImages.splice(index, 1)[0];\r\n\r\n      // If the image has an ID, add it to the list of images to delete\r\n      const imagesToDelete = [...prevData.images_to_delete];\r\n      if (removedImage && removedImage.id) {\r\n        imagesToDelete.push(removedImage.id);\r\n      }\r\n\r\n      return {\r\n        ...prevData,\r\n        existing_images: newImages,\r\n        images_to_delete: imagesToDelete\r\n      };\r\n    });\r\n  };\r\n\r\n  // Form handling\r\n  const handleInputChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setFormData(prevData => ({\r\n      ...prevData,\r\n      [name]: type === 'checkbox' ? checked : value\r\n    }));\r\n  };\r\n\r\n  const nextStep = () => {\r\n    window.scrollTo(0, 0);\r\n    setCurrentStep(prevStep => prevStep + 1);\r\n  };\r\n\r\n  const prevStep = () => {\r\n    window.scrollTo(0, 0);\r\n    setCurrentStep(prevStep => prevStep - 1);\r\n  };\r\n\r\n  const validateForm = () => {\r\n    // Base required fields\r\n    const requiredFields = [\r\n      'make', 'model', 'year', 'mileage', 'vehicle_type',\r\n      'condition', 'fuel_type', 'transmission', 'country',\r\n      'city', 'price'\r\n    ];\r\n\r\n    const missingFields = requiredFields.filter(field => !formData[field]);\r\n\r\n    if (missingFields.length > 0) {\r\n      setError(`Please fill in all required fields: ${missingFields.join(', ')}`);\r\n      return false;\r\n    }\r\n\r\n    // Validate numeric fields\r\n    if (isNaN(parseFloat(formData.price)) || parseFloat(formData.price) <= 0) {\r\n      setError('Please enter a valid price');\r\n      return false;\r\n    }\r\n\r\n    if (isNaN(parseInt(formData.year)) || parseInt(formData.year) < 1900 || parseInt(formData.year) > new Date().getFullYear()) {\r\n      setError('Please enter a valid year');\r\n      return false;\r\n    }\r\n\r\n    if (isNaN(parseInt(formData.mileage)) || parseInt(formData.mileage) < 0) {\r\n      setError('Please enter a valid mileage');\r\n      return false;\r\n    }\r\n\r\n    // Validate that there's at least one image when creating a new car\r\n    if (!isEditing && formData.uploaded_images.length === 0) {\r\n      setError('Please upload at least one image of your vehicle');\r\n      return false;\r\n    }\r\n\r\n    // When editing, ensure there's at least one image remaining\r\n    if (isEditing && formData.existing_images.length === 0 && formData.uploaded_images.length === 0) {\r\n      setError('Please keep at least one image or upload a new one');\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!validateForm()) {\r\n      window.scrollTo(0, 0);\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      // Prepare data for submission\r\n      const formDataToSubmit = new FormData();\r\n\r\n      // Add simple fields\r\n      Object.entries(formData).forEach(([key, value]) => {\r\n        // Skip special fields that need special handling\r\n        if (\r\n          key !== 'uploaded_images' &&\r\n          key !== 'existing_images' &&\r\n          key !== 'images_to_delete' &&\r\n          value !== ''\r\n        ) {\r\n          formDataToSubmit.append(key, value);\r\n        }\r\n      });\r\n\r\n      // Add uploaded images\r\n      formData.uploaded_images.forEach((image) => {\r\n        formDataToSubmit.append('uploaded_images', image);\r\n      });\r\n\r\n      // Add image IDs to delete when editing\r\n      if (isEditing && formData.images_to_delete.length > 0) {\r\n        formDataToSubmit.append('images_to_delete', JSON.stringify(formData.images_to_delete));\r\n      }\r\n\r\n      if (isEditing && carId) {\r\n        // For editing, we'll need to handle existing images differently\r\n        await CarService.updateCar(carId, formDataToSubmit);\r\n      } else {\r\n        // For creating new\r\n        await CarService.createCar(formDataToSubmit);\r\n      }\r\n\r\n      setSuccess(true);\r\n\r\n      // Clean up previews\r\n      formData.uploaded_images.forEach(file => {\r\n        if (file.preview) {\r\n          revokeFilePreview(file.preview);\r\n        }\r\n      });\r\n\r\n      if (onSuccess) {\r\n        onSuccess();\r\n      } else {\r\n        // Redirect after a delay\r\n        setTimeout(() => {\r\n          navigate('/profile');\r\n        }, 2000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Submission error:', error);\r\n      setError(\r\n        error.response?.data?.detail ||\r\n        'Failed to submit. Please check your information and try again.'\r\n      );\r\n      window.scrollTo(0, 0);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Render appropriate step\r\n  const renderStep = () => {\r\n    switch (currentStep) {\r\n      case 1:\r\n        return (\r\n          <VehicleDetailsStep\r\n            formData={formData}\r\n            handleInputChange={handleInputChange}\r\n            nextStep={nextStep}\r\n            isEditing={isEditing}\r\n          />\r\n        );\r\n      case 2:\r\n        return (\r\n          <LocationPriceStep\r\n            formData={formData}\r\n            handleInputChange={handleInputChange}\r\n            getRootProps={getRootProps}\r\n            getInputProps={getInputProps}\r\n            isDragActive={isDragActive}\r\n            uploadedImages={formData.uploaded_images}\r\n            existingImages={formData.existing_images}\r\n            removeImage={removeImage}\r\n            removeExistingImage={removeExistingImage}\r\n            nextStep={nextStep}\r\n            prevStep={prevStep}\r\n            isEditing={isEditing}\r\n          />\r\n        );\r\n      case 3:\r\n        return (\r\n          <ConfirmationStep\r\n            formData={formData}\r\n            handleSubmit={handleSubmit}\r\n            prevStep={prevStep}\r\n            loading={loading}\r\n            isEditing={isEditing}\r\n          />\r\n        );\r\n      default:\r\n        return <div>Invalid step</div>;\r\n    }\r\n  };\r\n\r\n  if (success) {\r\n    return (\r\n      <div className=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4\">\r\n        <p className=\"font-bold\">Success!</p>\r\n        <p>\r\n          {isEditing\r\n            ? t('cars.carUpdatedSuccess')\r\n            : t('cars.carCreatedSuccess')\r\n          }\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-3xl mx-auto bg-white rounded-lg shadow-md p-6\">\r\n      {error && (\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {/* Progress indicator */}\r\n      <div className=\"mb-8\">\r\n        <div className=\"flex items-center\">\r\n          <div className={`w-8 h-8 rounded-full flex items-center justify-center ${\r\n            currentStep >= 1 ? 'bg-indigo-900 text-white' : 'bg-gray-300 text-gray-600'\r\n          }`}>\r\n            1\r\n          </div>\r\n          <div className={`h-1 flex-1 ${\r\n            currentStep >= 2 ? 'bg-indigo-900' : 'bg-gray-300'\r\n          }`}></div>\r\n          <div className={`w-8 h-8 rounded-full flex items-center justify-center ${\r\n            currentStep >= 2 ? 'bg-indigo-900 text-white' : 'bg-gray-300 text-gray-600'\r\n          }`}>\r\n            2\r\n          </div>\r\n          <div className={`h-1 flex-1 ${\r\n            currentStep >= 3 ? 'bg-indigo-900' : 'bg-gray-300'\r\n          }`}></div>\r\n          <div className={`w-8 h-8 rounded-full flex items-center justify-center ${\r\n            currentStep >= 3 ? 'bg-indigo-900 text-white' : 'bg-gray-300 text-gray-600'\r\n          }`}>\r\n            3\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {renderStep()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SellCarForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}