{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{useTranslation}from'react-i18next';import{getImageUrl}from'../../utils/helpers';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CarCard=_ref=>{let{car}=_ref;const{t}=useTranslation();const[imageSrc,setImageSrc]=useState(null);// Load image only once when component mounts\nuseEffect(()=>{// Function to get the primary image or use a placeholder\nconst loadPrimaryImage=()=>{if(car.images&&car.images.length>0){const primaryImage=car.images.find(img=>img.is_primary);return getImageUrl(primaryImage?primaryImage.image:car.images[0].image);}return'/images/car-placeholder.jpg';// Fallback image\n};setImageSrc(loadPrimaryImage());},[car.id]);// Only re-run if car.id changes\n// Handle missing car data gracefully\nif(!car||!car.id){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md p-4 h-48 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:t('errors.missingCarData')})});}// Handle price and mileage formatting\nconst priceFormatted=typeof car.price==='number'?car.price.toLocaleString():Number(car.price).toLocaleString()||'N/A';const mileageFormatted=typeof car.mileage==='number'?car.mileage.toLocaleString():Number(car.mileage).toLocaleString()||'N/A';return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-hidden transition-transform hover:shadow-lg\",children:/*#__PURE__*/_jsxs(Link,{to:`/cars/${car.id}`,className:\"flex flex-col md:flex-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"md:w-1/3\",children:imageSrc&&/*#__PURE__*/_jsx(\"img\",{src:imageSrc,alt:`${car.year} ${car.make} ${car.model}`,className:\"w-full h-48 md:h-full object-cover\",onError:e=>{e.target.onerror=null;// Prevent infinite loop\ne.target.src='/images/car-placeholder.jpg';}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 md:w-2/3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-gray-900\",children:[car.make,\" \",car.model,\" \",car.year]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[mileageFormatted,\" \",t('cars.mileage')]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-indigo-900\",children:[\"$\",priceFormatted]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 grid grid-cols-2 gap-y-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-500\",children:[t('cars.fuelType'),\":\"]}),' ',/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:car.fuel_type||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-500\",children:[t('cars.transmission'),\":\"]}),' ',/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:car.transmission||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-500\",children:[t('cars.condition'),\":\"]}),' ',/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:car.condition||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-500\",children:[t('cars.vehicleType'),\":\"]}),' ',/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:car.vehicle_type||'N/A'})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-3 text-gray-600 line-clamp-2\",children:car.description?car.description:t('cars.noDescription')}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 flex justify-between text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-500\",children:[car.city||'N/A',\", \",car.country||'N/A']}),/*#__PURE__*/_jsx(\"div\",{className:\"text-indigo-600\",children:t('common.viewDetails')})]})]})]})});};export default CarCard;","map":{"version":3,"names":["React","useState","useEffect","Link","useTranslation","getImageUrl","jsx","_jsx","jsxs","_jsxs","CarCard","_ref","car","t","imageSrc","setImageSrc","loadPrimaryImage","images","length","primaryImage","find","img","is_primary","image","id","className","children","priceFormatted","price","toLocaleString","Number","mileageFormatted","mileage","to","src","alt","year","make","model","onError","e","target","onerror","fuel_type","transmission","condition","vehicle_type","description","city","country"],"sources":["C:/Users/partu/Desktop/militex/frontend/src/components/cars/CarCard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { getImageUrl } from '../../utils/helpers';\r\n\r\nconst CarCard = ({ car }) => {\r\n  const { t } = useTranslation();\r\n  const [imageSrc, setImageSrc] = useState(null);\r\n\r\n  // Load image only once when component mounts\r\n  useEffect(() => {\r\n    // Function to get the primary image or use a placeholder\r\n    const loadPrimaryImage = () => {\r\n      if (car.images && car.images.length > 0) {\r\n        const primaryImage = car.images.find(img => img.is_primary);\r\n        return getImageUrl(primaryImage ? primaryImage.image : car.images[0].image);\r\n      }\r\n      return '/images/car-placeholder.jpg'; // Fallback image\r\n    };\r\n\r\n    setImageSrc(loadPrimaryImage());\r\n  }, [car.id]); // Only re-run if car.id changes\r\n\r\n  // Handle missing car data gracefully\r\n  if (!car || !car.id) {\r\n    return (\r\n      <div className=\"bg-white rounded-lg shadow-md p-4 h-48 flex items-center justify-center\">\r\n        <p className=\"text-gray-500\">{t('errors.missingCarData')}</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Handle price and mileage formatting\r\n  const priceFormatted = typeof car.price === 'number'\r\n    ? car.price.toLocaleString()\r\n    : Number(car.price).toLocaleString() || 'N/A';\r\n\r\n  const mileageFormatted = typeof car.mileage === 'number'\r\n    ? car.mileage.toLocaleString()\r\n    : Number(car.mileage).toLocaleString() || 'N/A';\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-md overflow-hidden transition-transform hover:shadow-lg\">\r\n      <Link to={`/cars/${car.id}`} className=\"flex flex-col md:flex-row\">\r\n        {/* Car Image */}\r\n        <div className=\"md:w-1/3\">\r\n          {imageSrc && (\r\n            <img\r\n              src={imageSrc}\r\n              alt={`${car.year} ${car.make} ${car.model}`}\r\n              className=\"w-full h-48 md:h-full object-cover\"\r\n              onError={(e) => {\r\n                e.target.onerror = null; // Prevent infinite loop\r\n                e.target.src = '/images/car-placeholder.jpg';\r\n              }}\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        {/* Car Details */}\r\n        <div className=\"p-4 md:w-2/3\">\r\n          <div className=\"flex justify-between items-start\">\r\n            <div>\r\n              <h3 className=\"text-xl font-bold text-gray-900\">\r\n                {car.make} {car.model} {car.year}\r\n              </h3>\r\n              <p className=\"text-gray-600\">\r\n                {mileageFormatted} {t('cars.mileage')}\r\n              </p>\r\n            </div>\r\n            <div className=\"text-2xl font-bold text-indigo-900\">\r\n              ${priceFormatted}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Car Specs */}\r\n          <div className=\"mt-4 grid grid-cols-2 gap-y-2 text-sm\">\r\n            <div>\r\n              <span className=\"text-gray-500\">{t('cars.fuelType')}:</span>{' '}\r\n              <span className=\"font-medium\">{car.fuel_type || 'N/A'}</span>\r\n            </div>\r\n            <div>\r\n              <span className=\"text-gray-500\">{t('cars.transmission')}:</span>{' '}\r\n              <span className=\"font-medium\">{car.transmission || 'N/A'}</span>\r\n            </div>\r\n            <div>\r\n              <span className=\"text-gray-500\">{t('cars.condition')}:</span>{' '}\r\n              <span className=\"font-medium\">{car.condition || 'N/A'}</span>\r\n            </div>\r\n            <div>\r\n              <span className=\"text-gray-500\">{t('cars.vehicleType')}:</span>{' '}\r\n              <span className=\"font-medium\">{car.vehicle_type || 'N/A'}</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Car Description (truncated) */}\r\n          <p className=\"mt-3 text-gray-600 line-clamp-2\">\r\n            {car.description ? car.description : t('cars.noDescription')}\r\n          </p>\r\n\r\n          {/* Location and Seller */}\r\n          <div className=\"mt-3 flex justify-between text-sm\">\r\n            <div className=\"text-gray-500\">\r\n              {car.city || 'N/A'}, {car.country || 'N/A'}\r\n            </div>\r\n            <div className=\"text-indigo-600\">\r\n              {t('common.viewDetails')}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CarCard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}