{"ast":null,"code":"// App.js\nimport React,{useEffect,useState}from'react';import{Routes,Route}from'react-router-dom';import{useTranslation}from'react-i18next';// Import context provider\nimport{AuthProvider}from'./contexts/AuthContext.js';import PrivateRoute from'./components/common/PrivateRoute.js';// Import layout components\nimport Header from'./components/layout/Header.js';import Footer from'./components/layout/Footer.js';// Import page components\nimport HomePage from'./pages/HomePage.js';import BuyPage from'./pages/BuyPage.js';import SellPage from'./pages/SellPage.js';import CarDetailPage from'./pages/CarDetailPage.js';// import FundraiserPage from './pages/FundraiserPage.js';\nimport ProfilePage from'./components/auth/ProfilePage.js';import Login from'./components/auth/Login.js';import Register from'./components/auth/Register.js';import ErrorPage from'./components/common/ErrorPage.js';import MaintenancePage from'./components/common/MaintenancePage.js';import getCSRFToken from\"./services/csrf\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const{t}=useTranslation();const[csrfInitialized,setCsrfInitialized]=useState(false);const[csrfError,setCsrfError]=useState(false);useEffect(()=>{const initializeApp=async()=>{try{// Get CSRF token when the app loads\nconst success=await getCSRFToken();setCsrfInitialized(success);if(!success){console.error(\"Failed to initialize CSRF protection\");setCsrfError(true);}}catch(error){console.error(\"Error initializing app:\",error);setCsrfError(true);}};initializeApp();},[]);// Show error message if CSRF initialization fails\nif(csrfError){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen bg-red-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-red-700 mb-2\",children:\"Connection Error\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 mb-4\",children:\"Failed to connect to the server. Please check your connection and refresh the page.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),className:\"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700\",children:\"Refresh Page\"})]})});}return/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col min-h-screen\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"main\",{className:\"flex-grow\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(HomePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/buy\",element:/*#__PURE__*/_jsx(BuyPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/cars/:id\",element:/*#__PURE__*/_jsx(CarDetailPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/sell\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(SellPage,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(ProfilePage,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/error\",element:/*#__PURE__*/_jsx(ErrorPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/maintenance\",element:/*#__PURE__*/_jsx(MaintenancePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(ErrorPage,{})})]})}),/*#__PURE__*/_jsx(Footer,{})]})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","Routes","Route","useTranslation","AuthProvider","PrivateRoute","Header","Footer","HomePage","BuyPage","SellPage","CarDetailPage","ProfilePage","Login","Register","ErrorPage","MaintenancePage","getCSRFToken","jsx","_jsx","jsxs","_jsxs","App","t","csrfInitialized","setCsrfInitialized","csrfError","setCsrfError","initializeApp","success","console","error","className","children","onClick","window","location","reload","path","element"],"sources":["C:/Users/partu/Desktop/militex/frontend/src/App.js"],"sourcesContent":["// App.js\r\nimport React, {useEffect, useState} from 'react';\r\nimport { Routes, Route } from 'react-router-dom';\r\nimport { useTranslation } from 'react-i18next';\r\n// Import context provider\r\nimport { AuthProvider } from './contexts/AuthContext.js';\r\nimport PrivateRoute from './components/common/PrivateRoute.js';\r\n\r\n// Import layout components\r\nimport Header from './components/layout/Header.js';\r\nimport Footer from './components/layout/Footer.js';\r\n\r\n// Import page components\r\nimport HomePage from './pages/HomePage.js';\r\nimport BuyPage from './pages/BuyPage.js';\r\nimport SellPage from './pages/SellPage.js';\r\nimport CarDetailPage from './pages/CarDetailPage.js';\r\n// import FundraiserPage from './pages/FundraiserPage.js';\r\nimport ProfilePage from './components/auth/ProfilePage.js';\r\nimport Login from './components/auth/Login.js';\r\nimport Register from './components/auth/Register.js';\r\nimport ErrorPage from './components/common/ErrorPage.js';\r\nimport MaintenancePage from './components/common/MaintenancePage.js';\r\nimport getCSRFToken from \"./services/csrf\";\r\n\r\nfunction App() {\r\n  const { t } = useTranslation();\r\n  const [csrfInitialized, setCsrfInitialized] = useState(false);\r\n  const [csrfError, setCsrfError] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const initializeApp = async () => {\r\n      try {\r\n        // Get CSRF token when the app loads\r\n        const success = await getCSRFToken();\r\n        setCsrfInitialized(success);\r\n        if (!success) {\r\n          console.error(\"Failed to initialize CSRF protection\");\r\n          setCsrfError(true);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error initializing app:\", error);\r\n        setCsrfError(true);\r\n      }\r\n    };\r\n\r\n    initializeApp();\r\n  }, []);\r\n\r\n  // Show error message if CSRF initialization fails\r\n  if (csrfError) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen bg-red-50 p-4\">\r\n        <div className=\"text-center\">\r\n          <h1 className=\"text-2xl font-bold text-red-700 mb-2\">Connection Error</h1>\r\n          <p className=\"text-red-600 mb-4\">\r\n            Failed to connect to the server. Please check your connection and refresh the page.\r\n          </p>\r\n          <button\r\n            onClick={() => window.location.reload()}\r\n            className=\"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700\"\r\n          >\r\n            Refresh Page\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AuthProvider>\r\n      <div className=\"flex flex-col min-h-screen\">\r\n        <Header />\r\n        <main className=\"flex-grow\">\r\n          <Routes>\r\n            <Route path=\"/\" element={<HomePage />} />\r\n            <Route path=\"/buy\" element={<BuyPage />} />\r\n            <Route path=\"/cars/:id\" element={<CarDetailPage />} />\r\n            <Route\r\n              path=\"/sell\"\r\n              element={\r\n                <PrivateRoute>\r\n                  <SellPage />\r\n                </PrivateRoute>\r\n              }\r\n            />\r\n            <Route path=\"/login\" element={<Login />} />\r\n            <Route path=\"/register\" element={<Register />} />\r\n            <Route\r\n              path=\"/profile\"\r\n              element={\r\n                <PrivateRoute>\r\n                  <ProfilePage />\r\n                </PrivateRoute>\r\n              }\r\n            />\r\n            <Route path=\"/error\" element={<ErrorPage />} />\r\n            <Route path=\"/maintenance\" element={<MaintenancePage />} />\r\n            <Route path=\"*\" element={<ErrorPage />} />\r\n          </Routes>\r\n        </main>\r\n        <Footer />\r\n      </div>\r\n    </AuthProvider>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}